<div id="app-viewer" class="app-viewer-wrapper" (mousemove)="onMouseMove()" (click)="onMouseMove()">
  <app-viewer-controls *ngIf="bookService.pageAvailable" [class.hide-on-inactivity]="hideOnInactivity"></app-viewer-controls>

  <span *ngIf="controlsService.leftPanelVisible && !controlsService.fullscreenEnabled()"
        class="app-handle app-left-handle valign-wrapper hide-on-small-only" 
        tabindex="0"
        (click)="controlsService.hideLeftPanel()" 
        [matTooltip]="'view_controls.tooltip_hide_left' | translate">
        <mat-icon>arrow_left</mat-icon>
  </span>

  <span *ngIf="!controlsService.leftPanelVisible && !controlsService.fullscreenEnabled()"
        class="app-handle app-left-handle valign-wrapper hide-on-small-only" 
        tabindex="0"
        (click)="controlsService.showLeftPanel()" 
        [matTooltip]="'view_controls.tooltip_show_left' | translate">
        <mat-icon>arrow_right</mat-icon>
  </span>

  <span *ngIf="controlsService.rightPanelVisible && !controlsService.fullscreenEnabled()"
        class="app-handle app-right-handle valign-wrapper hide-on-small-only" 
        tabindex="0"
        (click)="controlsService.hideRightPanel()" 
        [matTooltip]="'view_controls.tooltip_hide_right' | translate">
        <mat-icon>arrow_right</mat-icon>
  </span>

  <span *ngIf="!controlsService.rightPanelVisible && !controlsService.fullscreenEnabled()"
        class="app-handle app-right-handle valign-wrapper hide-on-small-only" 
        tabindex="0"
        (click)="controlsService.showRightPanel()" 
        [matTooltip]="'view_controls.tooltip_show_right' | translate">
        <mat-icon>arrow_left</mat-icon>
  </span>

  
  <ng-container *ngIf="bookService.isPageInaccessible()">
      <app-licence-window [licences]="bookService.licences"></app-licence-window>
  </ng-container>


  <app-alert *ngIf="bookService.isPageFailure()"
              type="danger"
              label="alert.error"
              message="alert.failed_to_load_image">
  </app-alert>

<div class="app-alert-not-found" *ngIf="bookService.noFulltextResults()">
      <div class="app-message">{{ "alert.book_no_results" | translate }}</div>    
      <button (click)="bookService.fulltextChanged('')" mat-raised-button color="primary">{{ "alert.cancel_fulltext" | translate }}</button>
</div>

  <mat-spinner *ngIf="bookService.isPageLoading() || imageLoading" 
               class="medium-centered-spinner" 
               [strokeWidth]="3"
               [diameter]="40">
  </mat-spinner>
  
  <div *ngIf="bookService.licence && licences.bar(bookService.licence)" class="app-licence-bar">
      <span class="app-info">{{ licences.label(bookService.licence) }}</span>
      <span class="app-user">
            <ng-container *ngIf="authService.isLoggedIn()"> {{ authService.getUserId() || authService.getUserName() }} | </ng-container>
            {{ today() }}
      </span>
  </div>



<!-- <div id="selectionmenu">
      <div class="app-sel-button" (click)="onShowTextSelection()">Vypsat text</div>
      <div class="app-sel-button" (click)="onShowImageCrop()">Obrázek výřezu</div>
      <div class="app-sel-button">Sdílet</div>
      <div class="app-sel-cancel" (click)="cancelSelection()">Zvřít</div>

  </div> -->


  <div id="selectionmenu">

      <mat-icon (click)="onShowTextSelection()"
            [matTooltip]="'Textový přepis'" 
            *ngIf="showSelectText()"
            [class.app-inactive]="!selectTextEnabled()">
            title
      </mat-icon>

      <mat-icon (click)="onShowImageCrop()"
            [matTooltip]="'Obrázek'" 
            [class.app-inactive]="!imageCropEnabled()"
            *ngIf="showImageCrop()">
            image
      </mat-icon>

      <mat-icon (click)="onShareSelection()"
            [matTooltip]="'book_controls.tooltip_share' | translate">
            share
      </mat-icon>

      <mat-icon (click)="onShareSelection()"
            [matTooltip]="'Přečti'">
            record_voice_over
      </mat-icon>

      <mat-icon (click)="cancelSelection()"
      [matTooltip]="'common.close' | translate">
      close
</mat-icon>

  </div>




  <!-- <div id="selectionmenu" style="display: none; position: absolute; background-color: red; border-radius: 10px; width: 10px; height: 10px;">

  </div> -->
</div>



