<div class="app-map-browse">

<div class="app-list" (mouseleave)="focusedItem = null">

    <a class="app-list-item" *ngFor="let item of searchService.results" routerLink="{{item.url}}" (mouseenter)="focusedItem = item">
        <div class="app-item-thumb" [style.background-image]="thumb(item.uuid)">
            <div [matTooltip]="getLock(item).tooltip" class="app-lock {{ getLock(item).class }}" *ngIf="getLock(item)">
                <mat-icon>{{ getLock(item).icon }}</mat-icon>
            </div>
        </div>
        <div class="app-item-title">{{item.title}}</div>
        <div *ngIf="item.date" class="app-item-date">{{item.date}}</div>
        <div *ngIf="item.authors" class="app-item-authors">{{item.authors}}</div>
        <div *ngIf="item.geonames" class="app-item-geonames">{{item.geonames}}</div>
    </a>

</div>


<agm-map 
        [latitude]="lat" 
        [longitude]="lng" 
        [zoom]="zoom" 
        (mapReady)="onMapReady($event)"
        [streetViewControl]="false"
        (boundsChange)="onBoundsChange($event)" 
        (idle)="onIdle()">


    <agm-marker *ngIf="focusedItem && focusedItem.isPoint()" [latitude]="focusedItem.north" [longitude]="focusedItem.west" ></agm-marker>

    <agm-rectangle *ngIf="focusedItem && !focusedItem.isPoint()" 
                    [north]="focusedItem.north" 
                    [south]="focusedItem.south"                     
                    [west]="focusedItem.west" 
                    [east]="focusedItem.east" 
                    [fillColor]="'#0277bd'"
                    [fillOpacity]="0.5"
                    [strokeColor]="'#0277bd'"
                    [strokeOpacity]="1"
                    >
    </agm-rectangle>

</agm-map>


</div>